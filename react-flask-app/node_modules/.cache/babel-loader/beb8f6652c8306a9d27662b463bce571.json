{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nvar env = require('exenv');\n\nvar PropTypes = require('prop-types');\n\nvar React = require('react');\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) _setPrototypeOf(subClass, superClass);\n}\n\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (typeof call === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return _assertThisInitialized(self);\n}\n/**\n * The current implementation was chosen by performance and compatibility reasons, feel free to play\n * with benchmarks and submit PR with faster alternative. Each method contains links to benchmarks.\n */\n\n\nvar EventSet = /*#__PURE__*/function () {\n  /**\n   * @see https://jsperf.com/suir-eventset-constructor\n   */\n  function EventSet(eventHandlers) {\n    _classCallCheck(this, EventSet);\n\n    _defineProperty(this, \"handlers\", void 0);\n\n    this.handlers = eventHandlers.slice(0);\n  }\n  /**\n   * @see https://jsperf.com/suir-eventset-addhandlers\n   */\n\n\n  _createClass(EventSet, [{\n    key: \"addHandlers\",\n    value: function addHandlers(additionalHandlers) {\n      var newHandlers = this.handlers.slice(0);\n      var length = additionalHandlers.length; // Heads up!\n      // Previously we use Set there, it granted uniqueness of handlers, now dispatchEvent() is\n      // responsible for this.\n\n      for (var i = 0; i < length; i += 1) {\n        newHandlers.push(additionalHandlers[i]);\n      }\n\n      return new EventSet(newHandlers);\n    }\n    /**\n     * @see https://jsperf.com/suir-eventset-dispatchsingle\n     * @see https://jsperf.com/suir-eventset-dispatchmultiple2\n     */\n\n  }, {\n    key: \"dispatchEvent\",\n    value: function dispatchEvent(event, dispatchAll) {\n      var count = this.handlers.length - 1;\n\n      if (!dispatchAll) {\n        // Heads up!\n        // We don't use .pop() there because it will mutate the array.\n        var recentHandler = this.handlers[count];\n        recentHandler(event);\n        return;\n      }\n\n      for (var i = count; i >= 0; i -= 1) {\n        if (!this.handlers[i].called) {\n          this.handlers[i].called = true;\n          this.handlers[i](event);\n        }\n      }\n\n      for (var _i = count; _i >= 0; _i -= 1) {\n        this.handlers[_i].called = false;\n      }\n    }\n  }, {\n    key: \"hasHandlers\",\n    value: function hasHandlers() {\n      return this.handlers.length > 0;\n    }\n    /**\n     * @see https://jsperf.com/suir-eventset-removehandlers\n     */\n\n  }, {\n    key: \"removeHandlers\",\n    value: function removeHandlers(removalHandlers) {\n      var newHandlers = [];\n      var length = this.handlers.length;\n\n      for (var i = 0; i < length; i += 1) {\n        var handler = this.handlers[i];\n\n        if (removalHandlers.indexOf(handler) === -1) {\n          newHandlers.push(handler);\n        }\n      }\n\n      return new EventSet(newHandlers);\n    }\n  }]);\n\n  return EventSet;\n}();\n/**\n * An IE11-compatible function.\n *\n * @see https://jsperf.com/suir-clone-map\n */\n\n\nfunction cloneMap(map) {\n  var newMap = new Map();\n  map.forEach(function (value, key) {\n    newMap.set(key, value);\n  });\n  return newMap;\n}\n\nfunction normalizeHandlers(handlers) {\n  return Array.isArray(handlers) ? handlers : [handlers];\n}\n/**\n * Normalizes `target` for EventStack, because `target` can be passed as `boolean` or `string`.\n *\n * @see https://jsperf.com/suir-normalize-target\n */\n\n\nfunction normalizeTarget(target) {\n  if (target === 'document') return document;\n  if (target === 'window') return window;\n  return target || document;\n}\n\nvar EventPool = /*#__PURE__*/function () {\n  function EventPool(poolName, handlerSets) {\n    _classCallCheck(this, EventPool);\n\n    _defineProperty(this, \"handlerSets\", void 0);\n\n    _defineProperty(this, \"poolName\", void 0);\n\n    this.handlerSets = handlerSets;\n    this.poolName = poolName;\n  }\n\n  _createClass(EventPool, [{\n    key: \"addHandlers\",\n    value: function addHandlers(eventType, eventHandlers) {\n      var handlerSets = cloneMap(this.handlerSets);\n\n      if (handlerSets.has(eventType)) {\n        var eventSet = handlerSets.get(eventType);\n        handlerSets.set(eventType, eventSet.addHandlers(eventHandlers));\n      } else {\n        handlerSets.set(eventType, new EventSet(eventHandlers));\n      }\n\n      return new EventPool(this.poolName, handlerSets);\n    }\n  }, {\n    key: \"dispatchEvent\",\n    value: function dispatchEvent(eventType, event) {\n      var handlerSet = this.handlerSets.get(eventType);\n      var shouldDispatchAll = this.poolName === 'default';\n\n      if (handlerSet) {\n        handlerSet.dispatchEvent(event, shouldDispatchAll);\n      }\n    }\n  }, {\n    key: \"hasHandlers\",\n    value: function hasHandlers() {\n      return this.handlerSets.size > 0;\n    }\n  }, {\n    key: \"removeHandlers\",\n    value: function removeHandlers(eventType, eventHandlers) {\n      var handlerSets = cloneMap(this.handlerSets);\n\n      if (!handlerSets.has(eventType)) {\n        return new EventPool(this.poolName, handlerSets);\n      }\n\n      var currentSet = handlerSets.get(eventType);\n      var nextSet = currentSet.removeHandlers(eventHandlers);\n\n      if (nextSet.hasHandlers()) {\n        handlerSets.set(eventType, nextSet);\n      } else {\n        handlerSets.delete(eventType);\n      }\n\n      return new EventPool(this.poolName, handlerSets);\n    }\n  }]);\n\n  return EventPool;\n}();\n\n_defineProperty(EventPool, \"createByType\", function (poolName, eventType, eventHandlers) {\n  var handlerSets = new Map();\n  handlerSets.set(eventType, new EventSet(eventHandlers));\n  return new EventPool(poolName, handlerSets);\n});\n\nvar EventTarget = /*#__PURE__*/function () {\n  function EventTarget(target) {\n    _classCallCheck(this, EventTarget);\n\n    _defineProperty(this, \"handlers\", new Map());\n\n    _defineProperty(this, \"pools\", new Map());\n\n    _defineProperty(this, \"target\", void 0);\n\n    _defineProperty(this, \"createEmitter\", function (eventType, eventPools) {\n      return function (event) {\n        eventPools.forEach(function (pool) {\n          pool.dispatchEvent(eventType, event);\n        });\n      };\n    });\n\n    this.target = target;\n  }\n\n  _createClass(EventTarget, [{\n    key: \"addHandlers\",\n    value: function addHandlers(poolName, eventType, eventHandlers) {\n      this.removeTargetHandler(eventType);\n\n      if (this.pools.has(poolName)) {\n        var eventPool = this.pools.get(poolName);\n        this.pools.set(poolName, eventPool.addHandlers(eventType, eventHandlers));\n      } else {\n        this.pools.set(poolName, EventPool.createByType(poolName, eventType, eventHandlers));\n      }\n\n      this.addTargetHandler(eventType);\n    }\n  }, {\n    key: \"hasHandlers\",\n    value: function hasHandlers() {\n      return this.handlers.size > 0;\n    }\n  }, {\n    key: \"removeHandlers\",\n    value: function removeHandlers(poolName, eventType, eventHandlers) {\n      if (!this.pools.has(poolName)) {\n        return;\n      }\n\n      var pool = this.pools.get(poolName);\n      var newPool = pool.removeHandlers(eventType, eventHandlers);\n\n      if (newPool.hasHandlers()) {\n        this.pools.set(poolName, newPool);\n      } else {\n        this.pools.delete(poolName);\n      }\n\n      this.removeTargetHandler(eventType);\n\n      if (this.pools.size > 0) {\n        this.addTargetHandler(eventType);\n      }\n    }\n  }, {\n    key: \"addTargetHandler\",\n    value: function addTargetHandler(eventType) {\n      var handler = this.createEmitter(eventType, this.pools);\n      this.handlers.set(eventType, handler);\n      this.target.addEventListener(eventType, handler);\n    }\n  }, {\n    key: \"removeTargetHandler\",\n    value: function removeTargetHandler(eventType) {\n      if (this.handlers.has(eventType)) {\n        this.target.removeEventListener(eventType, this.handlers.get(eventType));\n        this.handlers.delete(eventType);\n      }\n    }\n  }]);\n\n  return EventTarget;\n}();\n\nvar EventStack = /*#__PURE__*/function () {\n  function EventStack() {\n    var _this = this;\n\n    _classCallCheck(this, EventStack);\n\n    _defineProperty(this, \"targets\", new Map());\n\n    _defineProperty(this, \"getTarget\", function (target) {\n      var autoCreate = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n      var normalized = normalizeTarget(target);\n\n      if (_this.targets.has(normalized)) {\n        return _this.targets.get(normalized);\n      }\n\n      if (!autoCreate) return null;\n      var eventTarget = new EventTarget(normalized);\n\n      _this.targets.set(normalized, eventTarget);\n\n      return eventTarget;\n    });\n\n    _defineProperty(this, \"removeTarget\", function (target) {\n      _this.targets.delete(normalizeTarget(target));\n    });\n  }\n\n  _createClass(EventStack, [{\n    key: \"sub\",\n    value: function sub(eventName, eventHandlers) {\n      var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n      if (!env.canUseDOM) return;\n      var _options$target = options.target,\n          target = _options$target === void 0 ? document : _options$target,\n          _options$pool = options.pool,\n          pool = _options$pool === void 0 ? 'default' : _options$pool;\n      var eventTarget = this.getTarget(target);\n      eventTarget.addHandlers(pool, eventName, normalizeHandlers(eventHandlers));\n    }\n  }, {\n    key: \"unsub\",\n    value: function unsub(eventName, eventHandlers) {\n      var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n      if (!env.canUseDOM) return;\n      var _options$target2 = options.target,\n          target = _options$target2 === void 0 ? document : _options$target2,\n          _options$pool2 = options.pool,\n          pool = _options$pool2 === void 0 ? 'default' : _options$pool2;\n      var eventTarget = this.getTarget(target, false);\n\n      if (eventTarget) {\n        eventTarget.removeHandlers(pool, eventName, normalizeHandlers(eventHandlers));\n        if (!eventTarget.hasHandlers()) this.removeTarget(target);\n      }\n    }\n  }]);\n\n  return EventStack;\n}();\n\nvar instance = new EventStack();\n/**\n * This component exposes the EventStack API as public and provides a declarative way to manage it.\n */\n\nvar EventStack$1 = /*#__PURE__*/function (_React$PureComponent) {\n  _inherits(EventStack, _React$PureComponent);\n\n  function EventStack() {\n    _classCallCheck(this, EventStack);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(EventStack).apply(this, arguments));\n  }\n\n  _createClass(EventStack, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.subscribe(this.props);\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      this.unsubscribe(prevProps);\n      this.subscribe(this.props);\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.unsubscribe(this.props);\n    }\n  }, {\n    key: \"subscribe\",\n    value: function subscribe(props) {\n      var name = props.name,\n          on = props.on,\n          pool = props.pool,\n          target = props.target;\n      instance.sub(name, on, {\n        pool: pool,\n        target: target\n      });\n    }\n  }, {\n    key: \"unsubscribe\",\n    value: function unsubscribe(props) {\n      var name = props.name,\n          on = props.on,\n          pool = props.pool,\n          target = props.target;\n      instance.unsub(name, on, {\n        pool: pool,\n        target: target\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return null;\n    }\n  }]);\n\n  return EventStack;\n}(React.PureComponent);\n\n_defineProperty(EventStack$1, \"defaultProps\", {\n  pool: 'default',\n  target: 'document'\n});\n\nEventStack$1.propTypes = {\n  /** An event name on which we will subscribe. */\n  name: PropTypes.string.isRequired,\n\n  /** An event handler or array of event handlers. */\n  on: PropTypes.oneOfType([PropTypes.func, PropTypes.arrayOf(PropTypes.func)]).isRequired,\n\n  /** A name of pool. */\n  pool: PropTypes.string,\n\n  /** A DOM element on which we will subscribe. */\n  target: PropTypes.oneOfType([PropTypes.oneOf(['document', 'window']), // Heads up!\n  // This condition for SSR safety.\n  PropTypes.instanceOf(env.canUseDOM ? HTMLElement : Object)])\n};\nexports.instance = instance;\nexports.default = EventStack$1;","map":{"version":3,"sources":["/Users/shinny/Desktop/ExpertAI/react-flask-app/node_modules/@semantic-ui-react/event-stack/lib/cjs/event-stack.development.js"],"names":["Object","defineProperty","exports","value","env","require","PropTypes","React","_classCallCheck","instance","Constructor","TypeError","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","key","_createClass","protoProps","staticProps","prototype","_defineProperty","obj","_inherits","subClass","superClass","create","constructor","_setPrototypeOf","_getPrototypeOf","o","setPrototypeOf","getPrototypeOf","__proto__","p","_assertThisInitialized","self","ReferenceError","_possibleConstructorReturn","call","EventSet","eventHandlers","handlers","slice","addHandlers","additionalHandlers","newHandlers","push","dispatchEvent","event","dispatchAll","count","recentHandler","called","_i","hasHandlers","removeHandlers","removalHandlers","handler","indexOf","cloneMap","map","newMap","Map","forEach","set","normalizeHandlers","Array","isArray","normalizeTarget","document","window","EventPool","poolName","handlerSets","eventType","has","eventSet","get","handlerSet","shouldDispatchAll","size","currentSet","nextSet","delete","EventTarget","eventPools","pool","removeTargetHandler","pools","eventPool","createByType","addTargetHandler","newPool","createEmitter","addEventListener","removeEventListener","EventStack","_this","autoCreate","arguments","undefined","normalized","targets","eventTarget","sub","eventName","options","canUseDOM","_options$target","_options$pool","getTarget","unsub","_options$target2","_options$pool2","removeTarget","EventStack$1","_React$PureComponent","apply","componentDidMount","subscribe","componentDidUpdate","prevProps","unsubscribe","componentWillUnmount","name","on","render","PureComponent","propTypes","string","isRequired","oneOfType","func","arrayOf","oneOf","instanceOf","HTMLElement","default"],"mappings":"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","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, '__esModule', { value: true });\n\nvar env = require('exenv');\nvar PropTypes = require('prop-types');\nvar React = require('react');\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) _setPrototypeOf(subClass, superClass);\n}\n\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (typeof call === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return _assertThisInitialized(self);\n}\n\n/**\n * The current implementation was chosen by performance and compatibility reasons, feel free to play\n * with benchmarks and submit PR with faster alternative. Each method contains links to benchmarks.\n */\nvar EventSet =\n/*#__PURE__*/\nfunction () {\n  /**\n   * @see https://jsperf.com/suir-eventset-constructor\n   */\n  function EventSet(eventHandlers) {\n    _classCallCheck(this, EventSet);\n\n    _defineProperty(this, \"handlers\", void 0);\n\n    this.handlers = eventHandlers.slice(0);\n  }\n  /**\n   * @see https://jsperf.com/suir-eventset-addhandlers\n   */\n\n\n  _createClass(EventSet, [{\n    key: \"addHandlers\",\n    value: function addHandlers(additionalHandlers) {\n      var newHandlers = this.handlers.slice(0);\n      var length = additionalHandlers.length; // Heads up!\n      // Previously we use Set there, it granted uniqueness of handlers, now dispatchEvent() is\n      // responsible for this.\n\n      for (var i = 0; i < length; i += 1) {\n        newHandlers.push(additionalHandlers[i]);\n      }\n\n      return new EventSet(newHandlers);\n    }\n    /**\n     * @see https://jsperf.com/suir-eventset-dispatchsingle\n     * @see https://jsperf.com/suir-eventset-dispatchmultiple2\n     */\n\n  }, {\n    key: \"dispatchEvent\",\n    value: function dispatchEvent(event, dispatchAll) {\n      var count = this.handlers.length - 1;\n\n      if (!dispatchAll) {\n        // Heads up!\n        // We don't use .pop() there because it will mutate the array.\n        var recentHandler = this.handlers[count];\n        recentHandler(event);\n        return;\n      }\n\n      for (var i = count; i >= 0; i -= 1) {\n        if (!this.handlers[i].called) {\n          this.handlers[i].called = true;\n          this.handlers[i](event);\n        }\n      }\n\n      for (var _i = count; _i >= 0; _i -= 1) {\n        this.handlers[_i].called = false;\n      }\n    }\n  }, {\n    key: \"hasHandlers\",\n    value: function hasHandlers() {\n      return this.handlers.length > 0;\n    }\n    /**\n     * @see https://jsperf.com/suir-eventset-removehandlers\n     */\n\n  }, {\n    key: \"removeHandlers\",\n    value: function removeHandlers(removalHandlers) {\n      var newHandlers = [];\n      var length = this.handlers.length;\n\n      for (var i = 0; i < length; i += 1) {\n        var handler = this.handlers[i];\n\n        if (removalHandlers.indexOf(handler) === -1) {\n          newHandlers.push(handler);\n        }\n      }\n\n      return new EventSet(newHandlers);\n    }\n  }]);\n\n  return EventSet;\n}();\n\n/**\n * An IE11-compatible function.\n *\n * @see https://jsperf.com/suir-clone-map\n */\nfunction cloneMap(map) {\n  var newMap = new Map();\n  map.forEach(function (value, key) {\n    newMap.set(key, value);\n  });\n  return newMap;\n}\nfunction normalizeHandlers(handlers) {\n  return Array.isArray(handlers) ? handlers : [handlers];\n}\n/**\n * Normalizes `target` for EventStack, because `target` can be passed as `boolean` or `string`.\n *\n * @see https://jsperf.com/suir-normalize-target\n */\n\nfunction normalizeTarget(target) {\n  if (target === 'document') return document;\n  if (target === 'window') return window;\n  return target || document;\n}\n\nvar EventPool =\n/*#__PURE__*/\nfunction () {\n  function EventPool(poolName, handlerSets) {\n    _classCallCheck(this, EventPool);\n\n    _defineProperty(this, \"handlerSets\", void 0);\n\n    _defineProperty(this, \"poolName\", void 0);\n\n    this.handlerSets = handlerSets;\n    this.poolName = poolName;\n  }\n\n  _createClass(EventPool, [{\n    key: \"addHandlers\",\n    value: function addHandlers(eventType, eventHandlers) {\n      var handlerSets = cloneMap(this.handlerSets);\n\n      if (handlerSets.has(eventType)) {\n        var eventSet = handlerSets.get(eventType);\n        handlerSets.set(eventType, eventSet.addHandlers(eventHandlers));\n      } else {\n        handlerSets.set(eventType, new EventSet(eventHandlers));\n      }\n\n      return new EventPool(this.poolName, handlerSets);\n    }\n  }, {\n    key: \"dispatchEvent\",\n    value: function dispatchEvent(eventType, event) {\n      var handlerSet = this.handlerSets.get(eventType);\n      var shouldDispatchAll = this.poolName === 'default';\n\n      if (handlerSet) {\n        handlerSet.dispatchEvent(event, shouldDispatchAll);\n      }\n    }\n  }, {\n    key: \"hasHandlers\",\n    value: function hasHandlers() {\n      return this.handlerSets.size > 0;\n    }\n  }, {\n    key: \"removeHandlers\",\n    value: function removeHandlers(eventType, eventHandlers) {\n      var handlerSets = cloneMap(this.handlerSets);\n\n      if (!handlerSets.has(eventType)) {\n        return new EventPool(this.poolName, handlerSets);\n      }\n\n      var currentSet = handlerSets.get(eventType);\n      var nextSet = currentSet.removeHandlers(eventHandlers);\n\n      if (nextSet.hasHandlers()) {\n        handlerSets.set(eventType, nextSet);\n      } else {\n        handlerSets.delete(eventType);\n      }\n\n      return new EventPool(this.poolName, handlerSets);\n    }\n  }]);\n\n  return EventPool;\n}();\n\n_defineProperty(EventPool, \"createByType\", function (poolName, eventType, eventHandlers) {\n  var handlerSets = new Map();\n  handlerSets.set(eventType, new EventSet(eventHandlers));\n  return new EventPool(poolName, handlerSets);\n});\n\nvar EventTarget =\n/*#__PURE__*/\nfunction () {\n  function EventTarget(target) {\n    _classCallCheck(this, EventTarget);\n\n    _defineProperty(this, \"handlers\", new Map());\n\n    _defineProperty(this, \"pools\", new Map());\n\n    _defineProperty(this, \"target\", void 0);\n\n    _defineProperty(this, \"createEmitter\", function (eventType, eventPools) {\n      return function (event) {\n        eventPools.forEach(function (pool) {\n          pool.dispatchEvent(eventType, event);\n        });\n      };\n    });\n\n    this.target = target;\n  }\n\n  _createClass(EventTarget, [{\n    key: \"addHandlers\",\n    value: function addHandlers(poolName, eventType, eventHandlers) {\n      this.removeTargetHandler(eventType);\n\n      if (this.pools.has(poolName)) {\n        var eventPool = this.pools.get(poolName);\n        this.pools.set(poolName, eventPool.addHandlers(eventType, eventHandlers));\n      } else {\n        this.pools.set(poolName, EventPool.createByType(poolName, eventType, eventHandlers));\n      }\n\n      this.addTargetHandler(eventType);\n    }\n  }, {\n    key: \"hasHandlers\",\n    value: function hasHandlers() {\n      return this.handlers.size > 0;\n    }\n  }, {\n    key: \"removeHandlers\",\n    value: function removeHandlers(poolName, eventType, eventHandlers) {\n      if (!this.pools.has(poolName)) {\n        return;\n      }\n\n      var pool = this.pools.get(poolName);\n      var newPool = pool.removeHandlers(eventType, eventHandlers);\n\n      if (newPool.hasHandlers()) {\n        this.pools.set(poolName, newPool);\n      } else {\n        this.pools.delete(poolName);\n      }\n\n      this.removeTargetHandler(eventType);\n\n      if (this.pools.size > 0) {\n        this.addTargetHandler(eventType);\n      }\n    }\n  }, {\n    key: \"addTargetHandler\",\n    value: function addTargetHandler(eventType) {\n      var handler = this.createEmitter(eventType, this.pools);\n      this.handlers.set(eventType, handler);\n      this.target.addEventListener(eventType, handler);\n    }\n  }, {\n    key: \"removeTargetHandler\",\n    value: function removeTargetHandler(eventType) {\n      if (this.handlers.has(eventType)) {\n        this.target.removeEventListener(eventType, this.handlers.get(eventType));\n        this.handlers.delete(eventType);\n      }\n    }\n  }]);\n\n  return EventTarget;\n}();\n\nvar EventStack =\n/*#__PURE__*/\nfunction () {\n  function EventStack() {\n    var _this = this;\n\n    _classCallCheck(this, EventStack);\n\n    _defineProperty(this, \"targets\", new Map());\n\n    _defineProperty(this, \"getTarget\", function (target) {\n      var autoCreate = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n      var normalized = normalizeTarget(target);\n\n      if (_this.targets.has(normalized)) {\n        return _this.targets.get(normalized);\n      }\n\n      if (!autoCreate) return null;\n      var eventTarget = new EventTarget(normalized);\n\n      _this.targets.set(normalized, eventTarget);\n\n      return eventTarget;\n    });\n\n    _defineProperty(this, \"removeTarget\", function (target) {\n      _this.targets.delete(normalizeTarget(target));\n    });\n  }\n\n  _createClass(EventStack, [{\n    key: \"sub\",\n    value: function sub(eventName, eventHandlers) {\n      var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n      if (!env.canUseDOM) return;\n      var _options$target = options.target,\n          target = _options$target === void 0 ? document : _options$target,\n          _options$pool = options.pool,\n          pool = _options$pool === void 0 ? 'default' : _options$pool;\n      var eventTarget = this.getTarget(target);\n      eventTarget.addHandlers(pool, eventName, normalizeHandlers(eventHandlers));\n    }\n  }, {\n    key: \"unsub\",\n    value: function unsub(eventName, eventHandlers) {\n      var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n      if (!env.canUseDOM) return;\n      var _options$target2 = options.target,\n          target = _options$target2 === void 0 ? document : _options$target2,\n          _options$pool2 = options.pool,\n          pool = _options$pool2 === void 0 ? 'default' : _options$pool2;\n      var eventTarget = this.getTarget(target, false);\n\n      if (eventTarget) {\n        eventTarget.removeHandlers(pool, eventName, normalizeHandlers(eventHandlers));\n        if (!eventTarget.hasHandlers()) this.removeTarget(target);\n      }\n    }\n  }]);\n\n  return EventStack;\n}();\n\nvar instance = new EventStack();\n\n/**\n * This component exposes the EventStack API as public and provides a declarative way to manage it.\n */\nvar EventStack$1 =\n/*#__PURE__*/\nfunction (_React$PureComponent) {\n  _inherits(EventStack, _React$PureComponent);\n\n  function EventStack() {\n    _classCallCheck(this, EventStack);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(EventStack).apply(this, arguments));\n  }\n\n  _createClass(EventStack, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.subscribe(this.props);\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      this.unsubscribe(prevProps);\n      this.subscribe(this.props);\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.unsubscribe(this.props);\n    }\n  }, {\n    key: \"subscribe\",\n    value: function subscribe(props) {\n      var name = props.name,\n          on = props.on,\n          pool = props.pool,\n          target = props.target;\n      instance.sub(name, on, {\n        pool: pool,\n        target: target\n      });\n    }\n  }, {\n    key: \"unsubscribe\",\n    value: function unsubscribe(props) {\n      var name = props.name,\n          on = props.on,\n          pool = props.pool,\n          target = props.target;\n      instance.unsub(name, on, {\n        pool: pool,\n        target: target\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return null;\n    }\n  }]);\n\n  return EventStack;\n}(React.PureComponent);\n\n_defineProperty(EventStack$1, \"defaultProps\", {\n  pool: 'default',\n  target: 'document'\n});\nEventStack$1.propTypes = {\n  /** An event name on which we will subscribe. */\n  name: PropTypes.string.isRequired,\n\n  /** An event handler or array of event handlers. */\n  on: PropTypes.oneOfType([PropTypes.func, PropTypes.arrayOf(PropTypes.func)]).isRequired,\n\n  /** A name of pool. */\n  pool: PropTypes.string,\n\n  /** A DOM element on which we will subscribe. */\n  target: PropTypes.oneOfType([PropTypes.oneOf(['document', 'window']), // Heads up!\n  // This condition for SSR safety.\n  PropTypes.instanceOf(env.canUseDOM ? HTMLElement : Object)])\n};\n\nexports.instance = instance;\nexports.default = EventStack$1;\n"]},"metadata":{},"sourceType":"script"}